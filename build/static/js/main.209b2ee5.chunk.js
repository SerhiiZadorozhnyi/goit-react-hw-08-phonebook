(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{134:function(e,t,n){e.exports={container__menu:"UserMenu_container__menu__4LEh8",avatar__menu:"UserMenu_avatar__menu__3dMPG",name__menu:"UserMenu_name__menu__1w_F3"}},137:function(e,t,n){e.exports={item__form:"ContactForm_item__form__2d4st",item__input:"ContactForm_item__input__s5Q5u"}},139:function(e,t,n){e.exports={item__filter:"Filter_item__filter__3dwFh",item__element:"Filter_item__element__2tQ6h","item__text-filter":"Filter_item__text-filter__33jnI"}},140:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),u=n(21),o=n(15),s=n(8),l=function(e){return e.auth.isAuthenticated},j=function(e){return e.auth.user.name},b=n(2);var d=function(){var e=Object(s.c)(l);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(u.c,{className:"navLink",to:"/",exact:!0,children:"Home"}),e&&Object(b.jsx)(u.c,{className:"navLink",to:"/contacts",exact:!0,children:"Contacts"})]})},m=n(18),O=n.n(m),f=n(32),p=n(13),h=n(26),v=n.n(h);v.a.defaults.baseURL="https://connections-api.herokuapp.com";var x=function(e){v.a.defaults.headers.common.Authorization="Bearer ".concat(e)},_=function(){v.a.defaults.headers.common.Authorization=""},g=Object(p.c)("auth/register",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/signup",t);case 4:return r=e.sent,x(r.data.token),e.abrupt("return",r.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(p.c)("auth/login",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/login",t);case 4:return r=e.sent,x(r.data.token),e.abrupt("return",r.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(p.c)("auth/logout",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/logout");case 4:_(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(p.c)("auth/getCurrentUser",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return x(r),e.prev=5,e.next=8,v.a.get("/users/current");case 8:return c=e.sent,i=c.data,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",e.t0.rejectWithValue());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),C=(n(134),n(173));var N=function(){var e=Object(s.c)(j),t=Object(s.b)();return Object(b.jsxs)("div",{className:"container__menu",children:[Object(b.jsx)("span",{className:"avatar__menu",children:" "}),Object(b.jsxs)("span",{className:"name__menu",children:[" ",e]}),Object(b.jsx)(C.a,{variant:"contained",color:"primary",size:"small",type:"submit",onClick:function(){return t(k())},children:"Logout"})]})},S=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.c,{to:"/register",exact:!0,className:"navLink",children:"Sign Up"}),Object(b.jsx)(u.c,{to:"/login",exact:!0,className:"navLink",children:"Sign In"})]})};var F=function(){var e=Object(s.c)(l);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("header",{className:"heder__styles",children:[Object(b.jsx)(d,{}),e?Object(b.jsx)(N,{}):Object(b.jsx)(S,{})]})})},W=n(24),L=(n(83),n(183)),V=n(182),I=n(59),z=n.n(I),T=n(64),A=n(177);var U=function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(W.a)(c,2),u=i[0],o=i[1],l=Object(a.useState)(""),j=Object(W.a)(l,2),d=j[0],m=j[1],O=Object(s.b)(),f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"email":o(a);break;case"password":m(a);break;default:return}},p=function(){r(""),o(""),m("")};return Object(b.jsx)(A.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"container__login",children:[Object(b.jsx)("div",{className:"avatar__class",children:Object(b.jsx)(L.a,{children:Object(b.jsx)(z.a,{})})}),Object(b.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(g({name:n,email:u,password:d})),p()},noValidate:!0,children:[Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(V.a,{type:"text",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:n,autoComplete:"fname",autoFocus:!0,onChange:f})}),Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(V.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",value:u,autoComplete:"email",onChange:f})}),Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(V.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Password",name:"password",type:"password",value:d,autoComplete:"current-password",onChange:f})}),Object(b.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign Up"})]})]})})};var E=function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(W.a)(c,2),u=i[0],o=i[1],l=Object(s.b)(),j=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":r(a);break;case"password":o(a);break;default:return}},d=function(){r(""),o("")};return Object(b.jsx)(A.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"container__login",children:[Object(b.jsx)("div",{className:"avatar__class",children:Object(b.jsx)(L.a,{children:Object(b.jsx)(z.a,{})})}),Object(b.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(y({email:n,password:u})),d()},noValidate:!0,children:[Object(b.jsx)(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",type:"email",name:"email",value:n,autoComplete:"email",autoFocus:!0,onChange:j}),Object(b.jsx)(V.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",name:"password",value:u,autoComplete:"current-password",onChange:j}),Object(b.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign In"})]})]})})},J=n(28),P=function(e){return e.contacts.contact},q=function(e){return e.contacts.filter},M=function(e){var t=P(e),n=q(e);return function(e){var t=n.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(t)}))}(t)},D=Object(p.c)("contact/fetchContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.get("/contacts");case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(p.c)("contact/addContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i,u,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.number,c=n.rejectWithValue,i={name:a,number:r},e.prev=3,e.next=6,v.a.post("/contacts",i);case 6:return u=e.sent,o=u.data,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",c(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Q=Object(p.c)("contact/deleteContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),G=Object(p.c)("contact/updateContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i,u,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.contactId,r=t.name,c=t.number,i=n.rejectWithValue,u={name:r,number:c},e.prev=3,e.next=6,v.a.patch("/contacts/".concat(a),u);case 6:return o=e.sent,s=o.data,console.log(s),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",i(e.t0));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()),H=(n(137),n(87)),R=n.n(H),K=n(60),X=n.n(K);var Y=function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(W.a)(c,2),u=i[0],o=i[1],l=Object(s.c)(P),j=Object(s.b)(),d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"number":o(a);break;default:return}},m=function(){r(""),o("")};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 ".concat(n," \u0437 \u0442\u0430\u043a\u0438\u043c \u0456\u043c\u0435\u043d\u0435\u043c \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454.")),void m();j(B({name:n,number:u})),m()},className:"item__form",autoComplete:"off",noValidate:!0,children:[Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(V.a,{size:"small",label:"Name",variant:"outlined",type:"text",name:"name",placeholder:"Jack Sparrow",value:n,onChange:d})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(X.a,{mask:"(999)999-99-99",maskChar:null,size:"small",label:"Phone",variant:"outlined",type:"text",name:"number",value:u,onChange:d,children:function(e){return Object(b.jsx)(V.a,Object(J.a)(Object(J.a)({},e),{},{type:" number ",variant:"outlined"}))}})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(C.a,{variant:"contained",type:"submit",color:"primary",disabled:""===n||""===u,startIcon:Object(b.jsx)(R.a,{}),children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})})},Z=(n(84),n(89)),$=n.n(Z),ee=n(88),te=n.n(ee),ne=n(178),ae=n(179),re=n(181),ce=n(180);var ie=function(){var e=Object(s.c)(M),t=Object(s.b)(),n=Object(o.h)();return Object(b.jsxs)(b.Fragment,{children:[!e.length&&Object(b.jsx)("div",{children:"\u041d\u0435\u043c\u0430\u0454 \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443."}),Object(b.jsx)(ne.a,{children:e.map((function(e){var a=e.id,r=e.name,c=e.number;return Object(b.jsxs)(ae.a,{children:[Object(b.jsx)(ce.a,{children:Object(b.jsx)(L.a,{})}),Object(b.jsx)(re.a,{primary:r,secondary:c}),Object(b.jsx)(u.b,{className:"button__mardg",to:{pathname:"/contacts/".concat(a),state:{from:n},name:r,number:c},children:Object(b.jsx)(C.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)(te.a,{}),children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})}),Object(b.jsx)(C.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)($.a,{}),onClick:function(){return function(e){return t(Q(e))}(a)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]},a)}))})]})},ue={changeFilter:Object(p.b)("contact/changeFilter")};n(139);var oe=function(){var e=Object(s.c)(q),t=Object(s.b)();return Object(b.jsx)(V.a,{size:"small",label:"Search",variant:"outlined",type:"text",value:e,onChange:function(e){return t(ue.changeFilter(e.target.value))}})};var se=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(D())}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Y,{}),Object(b.jsx)(oe,{}),Object(b.jsx)(ie,{})]})},le=n(63),je=["redirectTo","children"];var be=function(e){var t=e.redirectTo,n=e.children,a=Object(le.a)(e,je),r=Object(s.c)(l);return Object(b.jsx)(o.b,Object(J.a)(Object(J.a)({},a),{},{children:r?n:Object(b.jsx)(o.a,{to:t})}))},de=["redirectTo","children"];var me=function(e){var t=e.redirectTo,n=e.children,a=Object(le.a)(e,de),r=Object(s.c)(l);return Object(b.jsx)(o.b,Object(J.a)(Object(J.a)({},a),{},{children:r&&a.restricted?Object(b.jsx)(o.a,{to:t}):n}))},Oe=function(){return Object(b.jsx)("div",{className:"container__home",children:Object(b.jsx)("h1",{className:"title__home",children:"\u0412\u0456\u0442\u0430\u044e"})})};var fe=function(){var e=Object(o.i)().contactId,t=Object(o.h)(),n=Object(a.useState)(t.name),r=Object(W.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)(t.number),l=Object(W.a)(u,2),j=l[0],d=l[1],m=Object(o.g)(),O=Object(s.b)(),f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":i(a);break;case"number":d(a);break;default:return}};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(n){var a,r;n.preventDefault(),O(G({contactId:e,name:c,number:j})),m.push(null!==(a=null===t||void 0===t||null===(r=t.state)||void 0===r?void 0:r.from)&&void 0!==a?a:"/")},className:"item__form-edit",children:[Object(b.jsx)("div",{className:"item__input-edit",children:Object(b.jsx)(V.a,{size:"small",label:"Name",variant:"outlined",type:"text",name:"name",placeholder:"Jack Sparrow",value:c,onChange:f})}),Object(b.jsx)("div",{className:"item__input-edit",children:Object(b.jsx)(X.a,{mask:"(999)999-99-99",maskChar:null,size:"small",label:"Phone",variant:"outlined",type:"text",name:"number",value:j,onChange:f,children:function(e){return Object(b.jsx)(V.a,Object(J.a)(Object(J.a)({},e),{},{type:" number ",variant:"outlined"}))}})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(C.a,{variant:"contained",color:"primary",type:"submit",disabled:""===c||""===j,children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"})})]})})};n(140);var pe,he,ve,xe,_e,ge,ye,ke=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(w())}),[e]),Object(b.jsxs)("div",{className:"Container",children:[Object(b.jsx)(F,{}),Object(b.jsxs)(o.d,{children:[Object(b.jsx)(me,{exact:!0,path:"/",children:Object(b.jsx)(Oe,{})}),Object(b.jsx)(me,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(U,{})}),Object(b.jsx)(me,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(E,{})}),Object(b.jsx)(be,{exact:!0,path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(se,{})}),Object(b.jsx)(be,{path:"/contacts/:contactId",redirectTo:"/login",children:Object(b.jsx)(fe,{})})]})]})},we=n(62),Ce=n(7),Ne=n(19),Se={name:null,email:null},Fe=Object(p.d)(Se,(pe={},Object(Ce.a)(pe,g.fulfilled,(function(e,t){return t.payload.user})),Object(Ce.a)(pe,y.fulfilled,(function(e,t){return t.payload.user})),Object(Ce.a)(pe,k.fulfilled,(function(){return Se})),Object(Ce.a)(pe,w.fulfilled,(function(e,t){return t.payload})),pe)),We=Object(p.d)(null,(he={},Object(Ce.a)(he,g.fulfilled,(function(e,t){return t.payload.token})),Object(Ce.a)(he,y.fulfilled,(function(e,t){return t.payload.token})),Object(Ce.a)(he,k.fulfilled,(function(){return null})),he)),Le=function(e,t){return t.payload},Ve=Object(p.d)(null,(ve={},Object(Ce.a)(ve,g.rejected,Le),Object(Ce.a)(ve,y.rejected,Le),Object(Ce.a)(ve,k.rejected,Le),Object(Ce.a)(ve,w.rejected,Le),ve)),Ie=Object(p.d)(!1,(xe={},Object(Ce.a)(xe,g.fulfilled,(function(){return!0})),Object(Ce.a)(xe,g.rejected,(function(){return!1})),Object(Ce.a)(xe,y.fulfilled,(function(){return!0})),Object(Ce.a)(xe,y.rejected,(function(){return!1})),Object(Ce.a)(xe,k.fulfilled,(function(){return!1})),Object(Ce.a)(xe,w.fulfilled,(function(){return!0})),Object(Ce.a)(xe,w.rejected,(function(){return!1})),xe)),ze=Object(Ne.b)({user:Fe,token:We,error:Ve,isAuthenticated:Ie}),Te=Object(p.d)([],(_e={},Object(Ce.a)(_e,D.fulfilled,(function(e,t){return t.payload})),Object(Ce.a)(_e,B.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(we.a)(e),[n])})),Object(Ce.a)(_e,Q.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(Ce.a)(_e,G.fulfilled,(function(e,t){var n=t.payload;return e.map((function(e){return e.id===n.id?n:e}))})),_e)),Ae=Object(p.d)("",Object(Ce.a)({},ue.changeFilter,(function(e,t){return t.payload}))),Ue=Object(p.d)(null,(ge={},Object(Ce.a)(ge,D.rejected,(function(e,t){return t.payload})),Object(Ce.a)(ge,D.pending,(function(){return null})),ge)),Ee=Object(p.d)(!1,(ye={},Object(Ce.a)(ye,D.pending,(function(){return!0})),Object(Ce.a)(ye,D.fulfilled,(function(){return!1})),Object(Ce.a)(ye,D.rejected,(function(){return!1})),Object(Ce.a)(ye,B.pending,(function(){return!0})),Object(Ce.a)(ye,B.fulfilled,(function(){return!1})),Object(Ce.a)(ye,B.rejected,(function(){return!1})),Object(Ce.a)(ye,Q.pending,(function(){return!0})),Object(Ce.a)(ye,Q.fulfilled,(function(){return!1})),Object(Ce.a)(ye,Q.rejected,(function(){return!1})),Object(Ce.a)(ye,G.pending,(function(){return!0})),Object(Ce.a)(ye,G.fulfilled,(function(){return!1})),Object(Ce.a)(ye,G.rejected,(function(){return!1})),ye)),Je=Object(Ne.b)({contact:Te,loading:Ee,filter:Ae,error:Ue}),Pe=n(34),qe=n(90),Me=n.n(qe),De=n(91),Be=n.n(De),Qe=[].concat(Object(we.a)(Object(p.e)({serializableCheck:{ignoredActions:[Pe.a,Pe.f,Pe.b,Pe.c,Pe.d,Pe.e]}})),[Me.a]),Ge={key:"auth",storage:Be.a,whitelist:["token"]},He=Object(p.a)({reducer:{auth:Object(Pe.g)(Ge,ze),contacts:Je},devTools:!1,middleware:Qe}),Re=Object(Pe.h)(He),Ke=n(92);n(143);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(s.a,{store:He,children:Object(b.jsx)(Ke.a,{loading:null,persistor:Re,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(ke,{})})})})}),document.getElementById("root"))},83:function(e,t,n){},84:function(e,t,n){e.exports={item__contact:"ContactList_item__contact__20JL4","item__form-edit":"ContactList_item__form-edit__7A-96","item__input-edit":"ContactList_item__input-edit__2P0Jp",button__mardg:"ContactList_button__mardg__FtBWj"}}},[[144,1,2]]]);
//# sourceMappingURL=main.209b2ee5.chunk.js.map