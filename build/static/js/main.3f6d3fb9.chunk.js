(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{139:function(e,t,n){e.exports={container__menu:"UserMenu_container__menu__4LEh8",avatar__menu:"UserMenu_avatar__menu__3dMPG",name__menu:"UserMenu_name__menu__1w_F3"}},143:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),u=n(21),o=n(15),s=n(8),l=function(e){return e.auth.isAuthenticated},j=function(e){return e.auth.user.name},b=n(2);var d=function(){var e=Object(s.c)(l);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(u.c,{className:"navLink",to:"/",exact:!0,children:"Home"}),e&&Object(b.jsx)(u.c,{className:"navLink",to:"/contacts",exact:!0,children:"Contacts"})]})},m=n(18),O=n.n(m),f=n(32),p=n(13),h=n(26),v=n.n(h);v.a.defaults.baseURL="https://connections-api.herokuapp.com";var x=function(e){v.a.defaults.headers.comon.Authorization="Bearer ".concat(e)},_=function(){v.a.defaults.headers.comon.Authorization=""},g=Object(p.c)("auth/register",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/signup",t);case 4:return r=e.sent,x(r.data.token),e.abrupt("return",r.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(p.c)("auth/login",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/login",t);case 4:return r=e.sent,x(r.data.token),e.abrupt("return",r.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(p.c)("auth/logout",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/logout");case 4:_(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(p.c)("auth/getCurrentUser",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return x(r),e.prev=5,e.next=8,v.a.get("/users/current");case 8:return c=e.sent,i=c.data,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",e.t0.rejectWithValue());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),C=(n(139),n(174));var N=function(){var e=Object(s.c)(j),t=Object(s.b)();return Object(b.jsxs)("div",{className:"container__menu",children:[Object(b.jsx)("span",{className:"avatar__menu",children:" "}),Object(b.jsxs)("span",{className:"name__menu",children:[" ",e]}),Object(b.jsx)(C.a,{variant:"contained",color:"primary",size:"small",type:"submit",onClick:function(){return t(y())},children:"Logout"})]})},S=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.c,{to:"/register",exact:!0,className:"navLink",children:"Sign Up"}),Object(b.jsx)(u.c,{to:"/login",exact:!0,className:"navLink",children:"Sign In"})]})};var F=function(){var e=Object(s.c)(l);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("header",{className:"heder__styles",children:[Object(b.jsx)(d,{}),e?Object(b.jsx)(N,{}):Object(b.jsx)(S,{})]})})},W=n(24),I=(n(84),n(184)),L=n(183),V=n(58),z=n.n(V),T=n(63),A=n(178);var U=function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(W.a)(c,2),u=i[0],o=i[1],l=Object(a.useState)(""),j=Object(W.a)(l,2),d=j[0],m=j[1],O=Object(s.b)(),f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"email":o(a);break;case"password":m(a);break;default:return}},p=function(){r(""),o(""),m("")};return Object(b.jsx)(A.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"container__login",children:[Object(b.jsx)("div",{className:"avatar__class",children:Object(b.jsx)(I.a,{children:Object(b.jsx)(z.a,{})})}),Object(b.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(g({name:n,email:u,password:d})),p()},noValidate:!0,children:[Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(L.a,{type:"text",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:n,autoComplete:"fname",autoFocus:!0,onChange:f})}),Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(L.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",value:u,autoComplete:"email",onChange:f})}),Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(L.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Password",name:"password",type:"password",value:d,autoComplete:"current-password",onChange:f})}),Object(b.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign Up"})]})]})})};var B=function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(W.a)(c,2),u=i[0],o=i[1],l=Object(s.b)(),j=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":r(a);break;case"password":o(a);break;default:return}},d=function(){r(""),o("")};return Object(b.jsx)(A.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"container__login",children:[Object(b.jsx)("div",{className:"avatar__class",children:Object(b.jsx)(I.a,{children:Object(b.jsx)(z.a,{})})}),Object(b.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(k({email:n,password:u})),d()},noValidate:!0,children:[Object(b.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",type:"email",name:"email",value:n,autoComplete:"email",autoFocus:!0,onChange:j}),Object(b.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",name:"password",value:u,autoComplete:"current-password",onChange:j}),Object(b.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign In"})]})]})})},D=n(28),P=function(e){return e.contacts.contact},E=function(e){return e.contacts.filter},J=function(e){var t=P(e),n=E(e);return function(e){var t=n.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(t)}))}(t)},M=Object(p.c)("contact/fetchContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.get("/contacts");case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(p.c)("contact/addContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i,u,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.number,c=n.rejectWithValue,i={name:a,number:r},e.prev=3,e.next=6,v.a.post("/contacts",i);case 6:return u=e.sent,o=u.data,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",c(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Q=Object(p.c)("contact/deleteContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),G=Object(p.c)("contact/updateContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i,u,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.contactId,r=t.name,c=t.number,i=n.rejectWithValue,u={name:r,number:c},e.prev=3,e.next=6,v.a.patch("/contacts/".concat(a),u);case 6:return o=e.sent,s=o.data,console.log(s),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",i(e.t0));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()),H=n(69),R=n.n(H),X=n(91),K=n(59),Y=n.n(K);var Z=function(){var e=Object(a.useState)(""),t=Object(W.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(W.a)(c,2),u=i[0],o=i[1],l=Object(s.c)(P),j=Object(s.b)(),d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"number":o(a);break;default:return}},m=function(){r(""),o("")};return Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 ".concat(n," \u0437 \u0442\u0430\u043a\u0438\u043c \u0456\u043c\u0435\u043d\u0435\u043c \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454.")),void m();j(q({name:n,number:u})),m()},className:R.a.itemForm,autoComplete:"off",noValidate:!0,children:[Object(b.jsx)("div",{className:"styles.item__input",children:Object(b.jsx)(L.a,{size:"small",label:"Name",variant:"outlined",type:"text",name:"name",placeholder:"Jack Sparrow",value:n,onChange:d})}),Object(b.jsx)("div",{className:"styles.item__input",children:Object(b.jsx)(K.InputMask,{mask:"(999)999-99-99",maskChar:null,size:"small",label:"Phone",variant:"outlined",type:"text",name:"Number",value:u,onChange:d,children:function(e){return Object(b.jsx)(L.a,Object(D.a)(Object(D.a)({},e),{},{type:"number",variant:"outlined"}))}})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(C.a,{variant:"contained",type:"submit",color:"primary",className:R.a.button,disabled:""===n||""===u,startIcon:Object(b.jsx)(X.SaveIcon,{}),children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"})})]})},$=n(92),ee=n.n($),te=n(94),ne=n(93),ae=n(179),re=n(180),ce=n(182),ie=n(181);var ue=function(){var e=Object(s.c)(J),t=Object(s.b)(),n=Object(o.h)();return Object(b.jsxs)(b.Fragment,{children:[e.length&&Object(b.jsx)("div",{children:"\u041d\u0435\u043c\u0430\u0454 \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443."}),Object(b.jsx)(ae.a,{children:e.map((function(e){var a=e.id,r=e.name,c=e.number;return Object(b.jsxs)(re.a,{children:[Object(b.jsx)(ie.a,{children:Object(b.jsx)(I.a,{})}),Object(b.jsx)(ce.a,{primary:r,secondary:c}),Object(b.jsx)(u.b,{className:ee.a.button__mardg,to:{pathname:"/contacts/".concat(a),state:{from:n},name:r,number:c},children:Object(b.jsx)(C.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)(ne.BorderColorIcon,{}),children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})}),Object(b.jsx)(C.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)(te.DeleteIcon,{}),onClick:function(){return function(e){return t(Q(e))}(a)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]},a)}))})]})},oe={changeFilter:Object(p.b)("contact/changeFilter")};var se=function(){var e=Object(s.c)(E),t=Object(s.b)();return Object(b.jsx)(L.a,{size:"small",label:"Search",variant:"outlined",type:"text",value:e,onChange:function(e){return t(oe.changeFilter(e.target.value))}})};var le=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(M())}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Z,{}),Object(b.jsx)(se,{}),Object(b.jsx)(ue,{})]})},je=n(62),be=["redirectTo","children"];var de=function(e){var t=e.redirectTo,n=e.children,a=Object(je.a)(e,be),r=Object(s.c)(l);return Object(b.jsx)(o.b,Object(D.a)(Object(D.a)({},a),{},{children:r?n:Object(b.jsx)(o.a,{to:t})}))},me=["redirectTo","children"];var Oe=function(e){var t=e.redirectTo,n=e.children,a=Object(je.a)(e,me),r=Object(s.c)(l);return Object(b.jsx)(o.b,Object(D.a)(Object(D.a)({},a),{},{children:r&&a.restricted?Object(b.jsx)(o.a,{to:t}):n}))},fe=function(){return Object(b.jsx)("div",{className:"container__home",children:Object(b.jsx)("h1",{className:"title__home",children:"\u0412\u0456\u0442\u0430\u044e"})})};var pe=function(){var e=Object(o.i)().contactId,t=Object(o.h)(),n=Object(a.useState)(t.name),r=Object(W.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)(t.number),l=Object(W.a)(u,2),j=l[0],d=l[1],m=Object(o.g)(),O=Object(s.b)(),f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":i(a);break;case"number":d(a);break;default:return}};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(n){var a,r;n.preventDefault(),O(G({contactId:e,name:c,number:j})),m.push(null!==(a=null===t||void 0===t||null===(r=t.state)||void 0===r?void 0:r.from)&&void 0!==a?a:"/")},className:"item__form-edit",children:[Object(b.jsx)("div",{className:"item__input-edit",children:Object(b.jsx)(L.a,{size:"small",label:"Name",variant:"outlined",type:"text",name:"name",placeholder:"Jack Sparrow",value:c,onChange:f})}),Object(b.jsx)("div",{className:"item__input-edit",children:Object(b.jsx)(Y.a,{mask:"(999)999-99-99",maskChar:null,size:"small",label:"Phone",variant:"outlined",type:"text",name:"number",value:j,onChange:f,children:function(e){return Object(b.jsx)(L.a,Object(D.a)(Object(D.a)({},e),{},{type:"number",variant:"outlined"}))}})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(C.a,{variant:"contained",color:"primary",type:"submit",disabled:""===c||""===j,children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"})})]})})};n(143);var he,ve,xe,_e,ge,ke,ye,we=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(w())}),[e]),Object(b.jsxs)("div",{className:"Container",children:[Object(b.jsx)(F,{}),Object(b.jsxs)(o.d,{children:[Object(b.jsx)(Oe,{exact:!0,path:"/",children:Object(b.jsx)(fe,{})}),Object(b.jsx)(Oe,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(U,{})}),Object(b.jsx)(Oe,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(B,{})}),Object(b.jsx)(de,{exact:!0,path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(le,{})}),Object(b.jsx)(de,{path:"/contacts/:contactId",redirectTo:"/login",children:Object(b.jsx)(pe,{})})]})]})},Ce=n(61),Ne=n(7),Se=n(19),Fe={name:null,email:null},We=Object(p.d)(Fe,(he={},Object(Ne.a)(he,g.fulfilled,(function(e,t){return t.payload.user})),Object(Ne.a)(he,k.fulfilled,(function(e,t){return t.payload.user})),Object(Ne.a)(he,y.fulfilled,(function(){return Fe})),Object(Ne.a)(he,w.fulfilled,(function(e,t){return t.payload})),he)),Ie=Object(p.d)(null,(ve={},Object(Ne.a)(ve,g.fulfilled,(function(e,t){return t.payload.token})),Object(Ne.a)(ve,k.fulfilled,(function(e,t){return t.payload.token})),Object(Ne.a)(ve,y.fulfilled,(function(){return null})),ve)),Le=function(e,t){return t.payload},Ve=Object(p.d)(null,(xe={},Object(Ne.a)(xe,g.rejected,Le),Object(Ne.a)(xe,k.rejected,Le),Object(Ne.a)(xe,y.rejected,Le),Object(Ne.a)(xe,w.rejected,Le),xe)),ze=Object(p.d)(!1,(_e={},Object(Ne.a)(_e,g.fulfilled,(function(){return!0})),Object(Ne.a)(_e,g.rejected,(function(){return!1})),Object(Ne.a)(_e,k.fulfilled,(function(){return!0})),Object(Ne.a)(_e,k.rejected,(function(){return!1})),Object(Ne.a)(_e,y.fulfilled,(function(){return!1})),Object(Ne.a)(_e,w.fulfilled,(function(){return!0})),Object(Ne.a)(_e,w.rejected,(function(){return!1})),_e)),Te=Object(Se.b)({user:We,token:Ie,error:Ve,isAuthenticated:ze}),Ae=Object(p.d)([],(ge={},Object(Ne.a)(ge,M.fulfilled,(function(e,t){return t.payload})),Object(Ne.a)(ge,q.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(Ce.a)(e),[n])})),Object(Ne.a)(ge,Q.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(Ne.a)(ge,G.fulfilled,(function(e,t){var n=t.payload;return e.map((function(e){return e.id===n.id?n:e}))})),ge)),Ue=Object(p.d)("",Object(Ne.a)({},oe.changeFilter,(function(e,t){return t.payload}))),Be=Object(p.d)(null,(ke={},Object(Ne.a)(ke,M.rejected,(function(e,t){return t.payload})),Object(Ne.a)(ke,M.pending,(function(){return null})),ke)),De=Object(p.d)(!1,(ye={},Object(Ne.a)(ye,M.pending,(function(){return!0})),Object(Ne.a)(ye,M.fulfilled,(function(){return!1})),Object(Ne.a)(ye,M.rejected,(function(){return!1})),Object(Ne.a)(ye,q.pending,(function(){return!0})),Object(Ne.a)(ye,q.fulfilled,(function(){return!1})),Object(Ne.a)(ye,q.rejected,(function(){return!1})),Object(Ne.a)(ye,Q.pending,(function(){return!0})),Object(Ne.a)(ye,Q.fulfilled,(function(){return!1})),Object(Ne.a)(ye,Q.rejected,(function(){return!1})),Object(Ne.a)(ye,G.pending,(function(){return!0})),Object(Ne.a)(ye,G.fulfilled,(function(){return!1})),Object(Ne.a)(ye,G.rejected,(function(){return!1})),ye)),Pe=Object(Se.b)({contact:Ae,loading:De,filter:Ue,error:Be}),Ee=n(35),Je=n(95),Me=n.n(Je),qe=n(96),Qe=n.n(qe),Ge=[].concat(Object(Ce.a)(Object(p.e)({serializableCheck:{ignoredActions:[Ee.a,Ee.f,Ee.b,Ee.c,Ee.d,Ee.e]}})),[Me.a]),He={key:"auth",storage:Qe.a,whitelist:["token"]},Re=Object(p.a)({reducer:{auth:Object(Ee.g)(He,Te),contacts:Pe},devTools:!1,middleware:Ge}),Xe=Object(Ee.h)(Re),Ke=n(97);n(146);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(s.a,{store:Re,children:Object(b.jsx)(Ke.a,{loading:null,persistor:Xe,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(we,{})})})})}),document.getElementById("root"))},69:function(e,t,n){e.exports={item__form:"ContactForm_item__form__2d4st",item__input:"ContactForm_item__input__s5Q5u",label:"ContactForm_label__3QwkA",input:"ContactForm_input__lBUp1",itemForm:"ContactForm_itemForm__3dXPo",itemInput:"ContactForm_itemInput__1FeeD",itemBlock:"ContactForm_itemBlock__krhiD"}},84:function(e,t,n){},92:function(e,t,n){e.exports={item__contact:"ContactList_item__contact__20JL4","item__form-edit":"ContactList_item__form-edit__7A-96","item__input-edit":"ContactList_item__input-edit__2P0Jp",button__mardg:"ContactList_button__mardg__FtBWj"}}},[[147,1,2]]]);
//# sourceMappingURL=main.3f6d3fb9.chunk.js.map