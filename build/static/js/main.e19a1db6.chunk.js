(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),u=n(22),o=n(16),s=n(8),l=function(e){return e.auth.isAuthenticated},j=function(e){return e.auth.user.name},b=n(2);var d=function(){var e=Object(s.c)(l);return Object(b.jsxs)("nav",{children:[Object(b.jsx)(u.c,{className:"navLink",to:"/",exact:!0,children:"Home"}),e&&Object(b.jsx)(u.c,{className:"navLink",to:"/contacts",exact:!0,children:"Contacts"})]})},m=n(19),O=n.n(m),f=n(33),p=n(13),h=n(27),v=n.n(h);v.a.defaults.baseURL="https://connections-api.herokuapp.com";var x=function(e){v.a.defaults.headers.comon.Authorization="Bearer ".concat(e)},_=function(){v.a.defaults.headers.comon.Authorization=""},g=Object(p.c)("auth/register",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/signup",t);case 4:return r=e.sent,x(r.data.token),e.abrupt("return",r.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(p.c)("auth/login",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/login",t);case 4:return r=e.sent,x(r.data.token),e.abrupt("return",r.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(p.c)("auth/logout",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.post("/users/logout");case 4:_(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),C=Object(p.c)("auth/getCurrentUser",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return x(r),e.prev=5,e.next=8,v.a.get("/users/current");case 8:return c=e.sent,i=c.data,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",e.t0.rejectWithValue());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),w=n(63),N=n.n(w),S=n(170);var F=function(){var e=Object(s.c)(j),t=Object(s.b)();return Object(b.jsxs)("div",{className:N.a.container__menu,children:[Object(b.jsx)("span",{className:N.a.avatar__menu,children:" "}),Object(b.jsxs)("span",{className:N.a.name__menu,children:[" ",e]}),Object(b.jsx)(S.a,{variant:"contained",color:"primary",size:"small",type:"submit",onClick:function(){return t(y())},children:"Logout"})]})},I=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(u.c,{to:"/register",exact:!0,className:"navLink",children:"Sign Up"}),Object(b.jsx)(u.c,{to:"/login",exact:!0,className:"navLink",children:"Sign In"})]})};var W=function(){var e=Object(s.c)(l);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("header",{className:"heder__styles",children:[Object(b.jsx)(d,{}),e?Object(b.jsx)(F,{}):Object(b.jsx)(I,{})]})})},L=n(25),V=(n(82),n(180)),z=n(179),T=n(58),U=n.n(T),q=n(64),B=n(174);var M=function(){var e=Object(a.useState)(""),t=Object(L.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(L.a)(c,2),u=i[0],o=i[1],l=Object(a.useState)(""),j=Object(L.a)(l,2),d=j[0],m=j[1],O=Object(s.b)(),f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"email":o(a);break;case"password":m(a);break;default:return}},p=function(){r(""),o(""),m("")};return Object(b.jsx)(B.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"container__login",children:[Object(b.jsx)("div",{className:"avatar__class",children:Object(b.jsx)(V.a,{children:Object(b.jsx)(U.a,{})})}),Object(b.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(g({name:n,email:u,password:d})),p()},noValidate:!0,children:[Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(z.a,{type:"text",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Name",name:"name",value:n,autoComplete:"fname",autoFocus:!0,onChange:f})}),Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(z.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",value:u,autoComplete:"email",onChange:f})}),Object(b.jsx)("div",{className:"input__reg",children:Object(b.jsx)(z.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Password",name:"password",value:d,autoComplete:"current-password",onChange:f})}),Object(b.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign Up"})]})]})})};var A=function(){var e=Object(a.useState)(""),t=Object(L.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(L.a)(c,2),u=i[0],o=i[1],l=Object(s.b)(),j=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":r(a);break;case"password":o(a);break;default:return}},d=function(){r(""),o("")};return Object(b.jsx)(B.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"container__login",children:[Object(b.jsx)("div",{className:"avatar__class",children:Object(b.jsx)(V.a,{children:Object(b.jsx)(U.a,{})})}),Object(b.jsx)(q.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(k({email:n,password:u})),d()},noValidate:!0,children:[Object(b.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"email",name:"email",value:n,autoComplete:"email",autoFocus:!0,onChange:j}),Object(b.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"password",name:"password",value:u,autoComplete:"current-password",onChange:j}),Object(b.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign In"})]})]})})},E=n(29),D=function(e){return e.contacts.contact},J=function(e){return e.contacts.filter},P=function(e){var t=D(e),n=J(e);return function(e){var t=n.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(t)}))}(t)},H=Object(p.c)("contact/fetchContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.get("/contacts");case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(p.c)("contact/addContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i,u,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.number,c=n.rejectWithValue,i={name:a,number:r},e.prev=3,e.next=6,v.a.post("/contacts",i);case 6:return u=e.sent,o=u.data,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",c(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(p.c)("contact/deleteContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,v.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),G=Object(p.c)("contact/updateContact",function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i,u,o,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.contactId,r=t.name,c=t.number,i=n.rejectWithValue,u={name:r,number:c},e.prev=3,e.next=6,v.a.patch("/contacts/".concat(a),u);case 6:return o=e.sent,s=o.data,console.log(s),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",i(e.t0));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Q=n(70),X=n.n(Q),Y=n(89),Z=n(59);var $=function(){var e=Object(a.useState)(""),t=Object(L.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(L.a)(c,2),u=i[0],o=i[1],l=Object(s.c)(D),j=Object(s.b)(),d=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":r(a);break;case"number":o(a);break;default:return}},m=function(){r(""),o("")};return Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 ".concat(n," \u0437 \u0442\u0430\u043a\u0438\u043c \u0456\u043c\u0435\u043d\u0435\u043c \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454.")),void m();j(K({name:n,number:u})),m()},className:X.a.itemForm,autoComplete:"off",noValidate:!0,children:[Object(b.jsx)("div",{className:"styles.item__input",children:Object(b.jsx)(z.a,{size:"small",label:"Name",variant:"outlined",type:"text",name:"name",placeholder:"Jack Sparrow",value:n,onChange:d})}),Object(b.jsx)("div",{className:"styles.item__input",children:Object(b.jsx)(Z.InputMask,{mask:"(999)999-99-99",maskChar:null,size:"small",label:"Phone",variant:"outlined",type:"text",name:"Number",value:u,onChange:d,children:function(e){return Object(b.jsx)(z.a,Object(E.a)(Object(E.a)({},e),{},{type:"number",variant:"outlined"}))}})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(S.a,{variant:"contained",type:"submit",color:"primary",className:X.a.button,disabled:""===n||""===u,startIcon:Object(b.jsx)(Y.SaveIcon,{}),children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"})})]})},ee=n(90),te=n.n(ee),ne=n(92),ae=n(91),re=n(175),ce=n(176),ie=n(178),ue=n(177);var oe=function(){var e=Object(s.c)(P),t=Object(s.b)(),n=Object(o.h)();return Object(b.jsxs)(b.Fragment,{children:[e.length&&Object(b.jsx)("div",{children:"\u041d\u0435\u043c\u0430\u0454 \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443."}),Object(b.jsx)(re.a,{children:e.map((function(e){var a=e.id,r=e.name,c=e.number;return Object(b.jsxs)(ce.a,{children:[Object(b.jsx)(ue.a,{children:Object(b.jsx)(V.a,{})}),Object(b.jsx)(ie.a,{primary:r,secondary:c}),Object(b.jsx)(u.b,{className:te.a.button__mardg,to:{pathname:"/contacts/".concat(a),state:{from:n},name:r,number:c},children:Object(b.jsx)(S.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)(ae.BorderColorIcon,{}),children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})}),Object(b.jsx)(S.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(b.jsx)(ne.DeleteIcon,{}),onClick:function(){return function(e){return t(R(e))}(a)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]},a)}))})]})},se={changeFilter:Object(p.b)("contact/changeFilter")};var le=function(){var e=Object(s.c)(J),t=Object(s.b)();return Object(b.jsx)(z.a,{size:"small",label:"Search",variant:"outlined",type:"text",value:e,onChange:function(e){return t(se.changeFilter(e.target.value))}})};var je=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(H())}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)($,{}),Object(b.jsx)(le,{}),Object(b.jsx)(oe,{})]})},be=n(62),de=["redirectTo","children"];var me=function(e){var t=e.redirectTo,n=e.children,a=Object(be.a)(e,de),r=Object(s.c)(l);return Object(b.jsx)(o.b,Object(E.a)(Object(E.a)({},a),{},{children:r?n:Object(b.jsx)(o.a,{to:t})}))},Oe=["redirectTo","children"];var fe=function(e){var t=e.redirectTo,n=e.children,a=Object(be.a)(e,Oe),r=Object(s.c)(l);return Object(b.jsx)(o.b,Object(E.a)(Object(E.a)({},a),{},{children:r&&a.restricted?Object(b.jsx)(o.a,{to:t}):n}))},pe=function(){return Object(b.jsx)("div",{className:"container__home",children:Object(b.jsx)("h1",{className:"title__home",children:"\u0412\u0456\u0442\u0430\u044e"})})};var he=function(){var e=Object(o.i)().contactId,t=Object(o.h)(),n=Object(a.useState)(t.name),r=Object(L.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)(t.number),l=Object(L.a)(u,2),j=l[0],d=l[1],m=Object(o.g)(),O=Object(s.b)(),f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":i(a);break;case"number":d(a);break;default:return}};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(n){var a,r;n.preventDefault(),O(G({contactId:e,name:c,number:j})),m.push(null!==(a=null===t||void 0===t||null===(r=t.state)||void 0===r?void 0:r.from)&&void 0!==a?a:"/")},className:"item__form-edit",children:[Object(b.jsx)("div",{className:"item__input-edit",children:Object(b.jsx)(z.a,{size:"small",label:"Name",variant:"outlined",type:"text",name:"name",placeholder:"Jack Sparrow",value:c,onChange:f})}),Object(b.jsx)("div",{className:"item__input-edit",children:Object(b.jsx)(Z.InputMask,{mask:"(999)999-99-99",maskChar:null,size:"small",label:"Phone",variant:"outlined",type:"text",name:"number",value:j,onChange:f,children:function(e){return Object(b.jsx)(z.a,Object(E.a)(Object(E.a)({},e),{},{type:"number",variant:"outlined"}))}})}),Object(b.jsx)("div",{className:"item__input",children:Object(b.jsx)(S.a,{variant:"contained",color:"primary",type:"submit",disabled:""===c||""===j,children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"})})]})})};n(138);var ve,xe,_e,ge,ke,ye,Ce,we=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(C())}),[e]),Object(b.jsxs)("div",{className:"Container",children:[Object(b.jsx)(W,{}),Object(b.jsxs)(o.d,{children:[Object(b.jsx)(fe,{exact:!0,path:"/",children:Object(b.jsx)(pe,{})}),Object(b.jsx)(fe,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(M,{})}),Object(b.jsx)(fe,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(b.jsx)(A,{})}),Object(b.jsx)(me,{exact:!0,path:"/contacts",redirectTo:"/login",children:Object(b.jsx)(je,{})}),Object(b.jsx)(me,{path:"/contacts/:contactId",redirectTo:"/login",children:Object(b.jsx)(he,{})})]})]})},Ne=(n(139),n(61)),Se=n(7),Fe=n(20),Ie={name:null,email:null},We=Object(p.d)(Ie,(ve={},Object(Se.a)(ve,g.fulfilled,(function(e,t){return t.payload.user})),Object(Se.a)(ve,k.fulfilled,(function(e,t){return t.payload.user})),Object(Se.a)(ve,y.fulfilled,(function(){return Ie})),Object(Se.a)(ve,C.fulfilled,(function(e,t){return t.payload})),ve)),Le=Object(p.d)(null,(xe={},Object(Se.a)(xe,g.fulfilled,(function(e,t){return t.payload.token})),Object(Se.a)(xe,k.fulfilled,(function(e,t){return t.payload.token})),Object(Se.a)(xe,y.fulfilled,(function(){return null})),xe)),Ve=function(e,t){return t.payload},ze=Object(p.d)(null,(_e={},Object(Se.a)(_e,g.rejected,Ve),Object(Se.a)(_e,k.rejected,Ve),Object(Se.a)(_e,y.rejected,Ve),Object(Se.a)(_e,C.rejected,Ve),_e)),Te=Object(p.d)(!1,(ge={},Object(Se.a)(ge,g.fulfilled,(function(){return!0})),Object(Se.a)(ge,g.rejected,(function(){return!1})),Object(Se.a)(ge,k.fulfilled,(function(){return!0})),Object(Se.a)(ge,k.rejected,(function(){return!1})),Object(Se.a)(ge,y.fulfilled,(function(){return!1})),Object(Se.a)(ge,C.fulfilled,(function(){return!0})),Object(Se.a)(ge,C.rejected,(function(){return!1})),ge)),Ue=Object(Fe.b)({user:We,token:Le,error:ze,isAuthenticated:Te}),qe=Object(p.d)([],(ke={},Object(Se.a)(ke,H.fulfilled,(function(e,t){return t.payload})),Object(Se.a)(ke,K.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(Ne.a)(e),[n])})),Object(Se.a)(ke,R.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(Se.a)(ke,G.fulfilled,(function(e,t){var n=t.payload;return e.map((function(e){return e.id===n.id?n:e}))})),ke)),Be=Object(p.d)("",Object(Se.a)({},se.changeFilter,(function(e,t){return t.payload}))),Me=Object(p.d)(null,(ye={},Object(Se.a)(ye,H.rejected,(function(e,t){return t.payload})),Object(Se.a)(ye,H.pending,(function(){return null})),ye)),Ae=Object(p.d)(!1,(Ce={},Object(Se.a)(Ce,H.pending,(function(){return!0})),Object(Se.a)(Ce,H.fulfilled,(function(){return!1})),Object(Se.a)(Ce,H.rejected,(function(){return!1})),Object(Se.a)(Ce,K.pending,(function(){return!0})),Object(Se.a)(Ce,K.fulfilled,(function(){return!1})),Object(Se.a)(Ce,K.rejected,(function(){return!1})),Object(Se.a)(Ce,R.pending,(function(){return!0})),Object(Se.a)(Ce,R.fulfilled,(function(){return!1})),Object(Se.a)(Ce,R.rejected,(function(){return!1})),Object(Se.a)(Ce,G.pending,(function(){return!0})),Object(Se.a)(Ce,G.fulfilled,(function(){return!1})),Object(Se.a)(Ce,G.rejected,(function(){return!1})),Ce)),Ee=Object(Fe.b)({contact:qe,loading:Ae,filter:Be,error:Me}),De=n(35),Je=n(93),Pe=n.n(Je),He=n(94),Ke=n.n(He),Re=[].concat(Object(Ne.a)(Object(p.e)({serializableCheck:{ignoredActions:[De.a,De.f,De.b,De.c,De.d,De.e]}})),[Pe.a]),Ge={key:"auth",storage:Ke.a,whitelist:["token"]},Qe=Object(p.a)({reducer:{auth:Object(De.g)(Ge,Ue),contacts:Ee},devTools:!1,middleware:Re}),Xe=Object(De.h)(Qe),Ye=n(95);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(s.a,{store:Qe,children:Object(b.jsx)(Ye.a,{loading:null,persistor:Xe,children:Object(b.jsx)(u.a,{children:Object(b.jsx)(we,{})})})})}),document.getElementById("root"))},63:function(e,t,n){e.exports={container__menu:"UseMenu_container__menu__37har",avatar__menu:"UseMenu_avatar__menu__ohW_a",name__menu:"UseMenu_name__menu__1i1O6"}},70:function(e,t,n){e.exports={item__form:"ContactForm_item__form__8nPCm",item__input:"ContactForm_item__input__3rUS5",label:"ContactForm_label__378f8",input:"ContactForm_input__gm87B",itemForm:"ContactForm_itemForm__E58BF",itemInput:"ContactForm_itemInput__2wqEf",itemBlock:"ContactForm_itemBlock__ozs_K"}},82:function(e,t,n){},90:function(e,t,n){e.exports={item__contact:"ContactList_item__contact__2MFwC","item__form-edit":"ContactList_item__form-edit__1Iqf5","item__input-edit":"ContactList_item__input-edit__1VxjO",button__mardg:"ContactList_button__mardg__2Wp9N"}}},[[142,1,2]]]);
//# sourceMappingURL=main.e19a1db6.chunk.js.map